<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>古诗词互动手册 - 严谨版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #020617; overflow-x: hidden; }
        .font-serif { font-family: 'Noto Serif SC', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); opacity: 0; } }
        .element { position: absolute; z-index: 25; animation: fall linear infinite; pointer-events: none; }
        .pinyin { font-size: 0.55em; line-height: 1.2; margin-bottom: 4px; color: #a5b4fc; letter-spacing: 0.05em; font-weight: 500; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body class="text-slate-100">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const POEMS_DATA = [
            {
                title: "四时田园杂兴",
                author: "范成大",
                dynasty: "宋",
                authorBio: "范老师这辈子很励志，官做得极大。退休后回苏州老家开启了“养老博主”模式，一口气写了60首田园诗。他观察细致入微，是宋代田园诗的集大成者。",
                content: [
                    { text: "昼出耘田夜绩麻，", pinyin: "zhòu chū yún tián yè jì má", notes: "【耘田】除去田间杂草。【绩麻】把麻搓成线。" },
                    { text: "村庄儿女各当家。", pinyin: "cūn zhuāng ér nǚ gè dāng jiā", notes: "【各当家】各自担任起家庭的一份劳动。" },
                    { text: "童孙未解供耕织，", pinyin: "tóng sūn wèi jiě gòng gēng zhī", notes: "【未解】不懂得。【供】从事。" },
                    { text: "也傍桑阴学种瓜。", pinyin: "yě bàng sāng yīn xué zhòng guā", notes: "【傍】靠近。【桑阴】桑树的树荫。" }
                ],
                translation: "白天去田里除草，晚上回家搓麻线，村里的青年男女都各自忙着家里的活计。小孩子虽然不懂得耕种织布，也学着大人的样子，在桑树阴下学着种瓜。",
                effect: "leaves",
                visualElements: ["耘田绩麻", "桑阴种瓜"]
            },
            {
                title: "稚子弄冰",
                author: "杨万里",
                dynasty: "宋",
                authorBio: "杨万里是宋朝最有名的“性灵”诗人。他写诗从来不走寻常路，提倡“诚斋体”，强调真实自然。他是那种能陪孙子玩一下午冰块的有趣老头。",
                content: [
                    { text: "稚子金盆脱晓冰，", pinyin: "zhì zǐ jīn pén tuō xiǎo bīng", notes: "【稚子】幼小的孩子。【脱晓冰】指清晨从盆中取出冻好的冰块。" },
                    { text: "彩丝穿取当银钲。", pinyin: "cǎi sī chuān qǔ dāng yín zhēng", notes: "【钲】（zhēng）古代的一种金属乐器。" },
                    { text: "敲成玉磬穿林响，", pinyin: "qiāo chéng yù qìng chuān lín xiǎng", notes: "【磬】（qìng）古代打击乐器，多用玉或石制成。" },
                    { text: "忽作玻璃碎地声。", pinyin: "hū zuò bō lí suì dì shēng", notes: "【玻璃】指天然水晶之类的透明物质。此处形容冰碎的声音。" }
                ],
                translation: "清晨，小孩子从金属盆里取出冻好的冰块，用彩色丝线穿起来当作银钲敲击。清脆的声音像敲击玉磬一样穿过树林，忽然冰块掉在地上，发出了像玻璃破碎的声音。",
                effect: "snow",
                visualElements: ["彩丝穿冰", "晓冰玉磬"]
            },
            {
                title: "村晚",
                author: "雷震",
                dynasty: "宋",
                authorBio: "雷震是一个生平低调的奇人。历史记载虽少，但他凭借这首极具画面感的《村晚》，在群星闪耀的宋代词坛中稳占一席之地。",
                content: [
                    { text: "草满池塘水满陂，", pinyin: "cǎo mǎn chí táng shuǐ mǎn bēi", notes: "【陂】（bēi）池岸，水畔。" },
                    { text: "山衔落日浸寒漪。", pinyin: "shān xián luò rì jìn hán yī", notes: "【衔】嘴里含着。【漪】（yī）水面的波纹。" },
                    { text: "牧童归去横牛背，", pinyin: "mù tóng guī qù héng niú bèi", notes: "【横牛背】横坐在牛背上。" },
                    { text: "短笛无腔信口吹。", pinyin: "duǎn dí wú qiāng xìn kǒu chuī", notes: "【腔】曲调。【信口】随口。" }
                ],
                translation: "池塘边长满了绿草，池水涨满堤岸。夕阳好像衔在山头，倒映在清凉的水波中。牧童赶着牛回家，横坐在牛背上，拿着短笛随口吹着不成调的曲子。",
                effect: "mist",
                visualElements: ["落日浸寒漪", "牧童横牛背"]
            },
            {
                title: "游子吟",
                author: "孟郊",
                dynasty: "唐",
                authorBio: "孟郊考了一辈子试，五十岁才当上小官。他生活窘迫，人称“诗囚”。这首诗是他任职溧阳时，将老母亲接来供养时所写，字字含泪。",
                content: [
                    { text: "慈母手中线，", pinyin: "cí mǔ shǒu zhōng xiàn", notes: "【慈母】慈爱的母亲。" },
                    { text: "游子身上衣。", pinyin: "yóu zǐ shēn shàng yī", notes: "【游子】离家在外的人。" },
                    { text: "临行密密缝，", pinyin: "lín xíng mì mì féng", notes: "【密密缝】缝得细密，为了牢固耐穿。" },
                    { text: "意恐迟迟归。", pinyin: "yì kǒng chí chí guī", notes: "【意恐】担心。" },
                    { text: "谁言寸草心，", pinyin: "shuí yán cùn cǎo xīn", notes: "【寸草心】喻指子女微小的心意。" },
                    { text: "报得三春晖。", pinyin: "bào dé sān chūn huī", notes: "【三春晖】喻指母亲博大深厚的爱。三春：春季的三个月。" }
                ],
                translation: "慈母手中的针线，缝成了游子身上的衣裳。临行前缝得密密实实，唯恐儿子在外迟迟不归。谁说子女那点像小草一样微弱的孝心，能报答得了母亲像春天阳光一样的深恩呢？",
                effect: "spark",
                visualElements: ["慈母缝衣", "寸草春晖"]
            },
            {
                title: "鸟鸣涧",
                author: "王维",
                dynasty: "唐",
                authorBio: "王维是诗坛的“全才”，诗书画乐样样精通。他晚年隐居，心境平和，诗中充满了禅意，被誉为“诗中有画，画中有诗”。",
                content: [
                    { text: "人闲桂花落，", pinyin: "rén xián guì huā luò", notes: "【人闲】指人心境静谧。" },
                    { text: "夜静春山空。", pinyin: "yè jìng chūn shān kōng", notes: "【空】空旷，宁静。" },
                    { text: "月出惊山鸟，", pinyin: "yuè chū jīng shān niǎo", notes: "【惊】惊动。因月色皎洁清静，惊起了鸟儿。" },
                    { text: "时鸣春涧中。", pinyin: "shí míng chūn jiàn zhōng", notes: "【时鸣】不时地鸣叫。" }
                ],
                translation: "在这个寂静的人闲时刻，感觉得到桂花轻轻落下，夜里的春山一片空灵。月亮出来惊动了山里的鸟儿，它们不时在春天的涧水中鸣叫。",
                effect: "mist",
                visualElements: ["月出惊鸟", "春涧鸟鸣"]
            },
            {
                title: "从军行",
                author: "王昌龄",
                dynasty: "唐",
                authorBio: "王昌龄是边塞诗的“七绝圣手”。他笔下的战争不是惨烈的哭喊，而是极具史诗感的壮阔。一句“不破楼兰终不还”道尽了大唐男儿的热血。",
                content: [
                    { text: "青海长云暗雪山，", pinyin: "qīng hǎi cháng yún àn xuě shān", notes: "【暗】使动用法，使……暗淡。" },
                    { text: "孤城遥望玉门关。", pinyin: "gū chéng yáo wàng yù mén guān", notes: "【孤城】边防要塞。" },
                    { text: "黄沙百战穿金甲，", pinyin: "huáng shā bǎi zhàn chuān jīn jiǎ", notes: "【穿】磨破。" },
                    { text: "不破楼兰终不还。", pinyin: "bù pò lóu lán zhōng bù hái", notes: "【楼兰】汉代边境小国，此处借指敌军。" }
                ],
                translation: "青海湖上的长云遮蔽了阳光，雪山一片暗淡。遥望孤城，远在玉门关外。在漫天黄沙中身经百战磨穿了盔甲，不打败敌人，誓不回还！",
                effect: "sand",
                visualElements: ["黄沙金甲", "青海雪山"]
            },
            {
                title: "秋夜将晓出篱门迎凉有感",
                author: "陆游",
                dynasty: "宋",
                authorBio: "陆游是著名的爱国诗人。这首诗是他68岁在老家绍兴时所写，当时南宋偏安一隅，北方土地沦陷，他的忧愤之情溢于言表。",
                content: [
                    { text: "三万里河东入海，", pinyin: "sān wàn lǐ hé dōng rù hǎi", notes: "【三万里河】指黄河。形容其长。" },
                    { text: "五千仞岳上摩天。", pinyin: "wǔ qiān rèn yuè shàng mó tiān", notes: "【五千仞岳】指西岳华山。仞：八尺为一仞。" },
                    { text: "遗民泪尽胡尘里，", pinyin: "yí mín lèi jìn hú chén lǐ", notes: "【遗民】指沦陷区的百姓。【胡尘】指金兵的铁骑所扬起的尘土。" },
                    { text: "南望王师又一年。", pinyin: "nán wàng wáng shī yòu yī nián", notes: "【王师】指宋朝的军队。" }
                ],
                translation: "长达三万里的黄河向东流入大海，五千仞高的华山直刺云霄。沦陷区的百姓在金兵铁骑的尘土中哭干了眼泪，向南盼望朝廷的军队，又等了一年。",
                effect: "sand",
                visualElements: ["河岳摩天", "胡尘遗民"]
            },
            {
                title: "闻官军收河南河北",
                author: "杜甫",
                dynasty: "唐",
                authorBio: "杜甫这首诗被称为“生平第一快诗”。当时安史之乱接近尾声，杜甫听闻收复失地的消息，狂喜之下写下了这首充满速度感的名作。",
                content: [
                    { text: "剑外忽传收蓟北，", pinyin: "jiàn wài hū chuán shōu jì běi", notes: "【剑外】剑门关以南，指四川地区。【蓟（jì）北】唐代幽州、蓟州一带。" },
                    { text: "初闻涕泪满衣裳。", pinyin: "chū wén tì lèi mǎn yī shang", notes: "【涕泪】眼泪。" },
                    { text: "白日放歌须纵酒，", pinyin: "bái rì fàng gē xū zòng jiǔ", notes: "【纵酒】开怀畅饮。" },
                    { text: "青春作伴好还乡。", pinyin: "qīng chūn zuò bàn hǎo huán xiāng", notes: "【青春】指春天的景物，春天。" },
                    { text: "即从巴峡穿巫峡，", pinyin: "jí cóng bā xiá chuān wū xiá", notes: "【即】立即。" },
                    { text: "便下襄阳向洛阳。", pinyin: "biàn xià xiāng yáng xiàng luò yáng", notes: "【便】就。" }
                ],
                translation: "在剑外忽然听到官军收复蓟北的消息，喜极而泣，泪水打湿了衣裳。白日里纵情放歌，开怀畅饮，趁着大好春色，刚好回故乡。瞬间穿过巴峡巫峡，直奔襄阳洛阳而去！",
                effect: "confetti",
                visualElements: ["放歌纵酒", "快船还乡"]
            },
            {
                title: "凉州词",
                author: "王之涣",
                dynasty: "唐",
                authorBio: "王之涣在唐朝是绝对的顶级词人，传世作品虽少，但首首都是神作。这一首《凉州词》描绘了边陲雄奇的自然景观，气势宏大。",
                content: [
                    { text: "黄河远上白云间，", pinyin: "huáng hé yuǎn shàng bái yún jiān", notes: "形容黄河源远流长。" },
                    { text: "一片孤城万仞山。", pinyin: "yī piàn gū chéng wàn rèn shān", notes: "【孤城】指玉门关。" },
                    { text: "羌笛何须怨杨柳，", pinyin: "qiāng dí hé xū yuàn yáng liǔ", notes: "【杨柳】指乐曲《折杨柳》。" },
                    { text: "春风不度玉门关。", pinyin: "chūn fēng bù dù yù mén guān", notes: "【度】越过。" }
                ],
                translation: "黄河远远流向白云深处，在高山间矗立着一座孤城。何必用羌笛吹奏《折杨柳》来埋怨春光来迟呢？温暖的春风原本就吹不过玉门关。",
                effect: "sand",
                visualElements: ["白云黄河", "孤城万仞"]
            },
            {
                title: "黄鹤楼送孟浩然之广陵",
                author: "李白",
                dynasty: "唐",
                authorBio: "李白是孟浩然的“铁杆粉丝”。孟浩然年长李白十二岁，两人情谊深厚。这首诗将送别之情寄托在江水之中，境界开阔，不伤感。",
                content: [
                    { text: "故人西辞黄鹤楼，", pinyin: "gù rén xī cí huáng hè lóu", notes: "【故人】老友，指孟浩然。" },
                    { text: "烟花三月下扬州。", pinyin: "yān huā sān yuè xià yáng zhōu", notes: "【烟花】形容花开灿烂、雾气迷蒙的春景。" },
                    { text: "孤帆远影碧空尽，", pinyin: "gū fān yuǎn yǐng bì kōng jìn", notes: "【尽】消失。" },
                    { text: "唯见长江天际流。", pinyin: "wéi jiàn cháng jiāng tiān jì liú", notes: "【天际】天边。" }
                ],
                translation: "老朋友在黄鹤楼告辞西去，在繁花似锦的三月去往扬州。远去的孤船帆影消失在碧蓝天空的尽头，只看见长江水向着天际奔流。",
                effect: "river",
                visualElements: ["烟花三月", "帆影尽处"]
            },
            {
                title: "少年行",
                author: "王维",
                dynasty: "唐",
                authorBio: "这首诗是王维早年的作品。他描写的大唐少年，个个鲜衣怒马、意气风发。这种浪漫而豪侠的气息，正是盛唐气象的缩影。",
                content: [
                    { text: "新丰美酒斗十千，", pinyin: "xīn fēng měi jiǔ dǒu shí qiān", notes: "【斗十千】指酒价极贵。" },
                    { text: "咸阳游侠多少年。", pinyin: "xián yáng yóu xiá duō shào nián", notes: "【咸阳】秦代都城，此处借指唐都长安。" },
                    { text: "相逢意气为君饮，", pinyin: "xiāng féng yì qì wèi jūn yǐn", notes: "【意气】气概，性情。" },
                    { text: "系马高楼垂柳边。", pinyin: "xì mǎ gāo lóu chuí liǔ biān", notes: "【系马】把马拴住。" }
                ],
                translation: "新丰的美酒万钱一斗，长安城里到处是意气风发的游侠少年。大家相逢性情投契，尽情畅饮，骏马就拴在高楼外的垂柳边。",
                effect: "leaves",
                visualElements: ["少年意气", "高楼系马"]
            },
            {
                title: "赠花卿",
                author: "杜甫",
                dynasty: "唐",
                authorBio: "杜甫寓居成都时，花敬定将军对他多有照顾。但这首诗实则含蓄地指出了花敬定在宴会上僭越使用了只有天子才能欣赏的乐曲。",
                content: [
                    { text: "锦城丝管日纷纷，", pinyin: "jǐn chéng sī guǎn rì fēn fēn", notes: "【锦城】成都的别称。【丝管】指弦乐和管乐。" },
                    { text: "半入江风半入云。", pinyin: "bàn rù jiāng fēng bàn rù yún", notes: "形容乐声美妙悠扬。" },
                    { text: "此曲只应天上有，", pinyin: "cǐ qǔ zhǐ yīng tiān shàng yǒu", notes: "【天上】此处双关，暗指天子所住的宫廷。" },
                    { text: "人间能得几回闻？", pinyin: "rén jiān néng dé jǐ huí wén", notes: "【几回闻】能听到几回？暗指平民或地方将领不该享用。" }
                ],
                translation: "成都城里的乐声终日不绝，随风飘入江风，飘入云端。这样的曲子只应该天上（皇宫）才有，凡间哪里能听到几次呢？",
                effect: "spark",
                visualElements: ["锦城丝管", "仙乐入云"]
            },
            {
                title: "江上",
                author: "王安石",
                dynasty: "宋",
                authorBio: "王安石在推行变法失败后，晚年隐居南京钟山。这首诗写出了江边景色的瞬息万变，也透出他晚年心境的平和。诗句清新有力。",
                content: [
                    { text: "江北秋阴一半开，", pinyin: "jiāng běi qiū yīn yī bàn kāi", notes: "【秋阴】秋天的阴云。【开】消散。" },
                    { text: "晚云含雨却低徊。", pinyin: "wǎn yún hán yǔ què dī huí", notes: "【低徊】在低空徘徊盘旋。" },
                    { text: "青山缭绕疑无路，", pinyin: "qīng shān liáo rào yí wú lù", notes: "【缭绕】环绕。" },
                    { text: "忽见千帆隐映来。", pinyin: "hū jiàn qiān fān yǐn yìng lái", notes: "【隐映】若隐若现。" }
                ],
                translation: "江北秋天的阴云刚消散一半，傍晚含雨的云低低地徘徊。青山重重叠叠仿佛没有了路，忽然看见千万帆影若隐若现地驶来。",
                effect: "rain",
                visualElements: ["青山无路", "千帆隐映"]
            },
            {
                title: "沈园（其一）",
                author: "陆游",
                dynasty: "宋",
                authorBio: "这是陆游75岁重游沈园时写的。沈园是他与表妹唐婉爱情悲剧的见证。唐婉去世多年，陆游旧地重游，悲不自胜，写下了一生中最凄美的作品。",
                content: [
                    { text: "城上斜阳画角哀，", pinyin: "chéng shàng xié yáng huà jiǎo āi", notes: "【画角】古代军中的管乐器。" },
                    { text: "沈园非复旧池台。", pinyin: "shěn yuán fēi fù jiù chí tái", notes: "【非复】不再是。" },
                    { text: "伤心桥下春波绿，", pinyin: "shāng xīn qiáo xià chūn bō lǜ", notes: "【春波】春天的水波。" },
                    { text: "曾是惊鸿照影来。", pinyin: "céng shì jīng hóng zhào yǐng lái", notes: "【惊鸿】喻指轻盈曼妙的佳人。此处指唐婉。" }
                ],
                translation: "城墙上斜阳渐落，角声凄凉。沈园已不再是往日的景象。令人伤心的桥下春水依旧碧绿，这里曾经映照过她那如惊鸿般轻盈的身影。",
                effect: "leaves",
                visualElements: ["伤心桥下", "惊鸿照影"]
            },
            {
                title: "冬夜读书示子聿",
                author: "陆游",
                dynasty: "宋",
                authorBio: "这是陆游晚年写给小儿子陆聿的教诲。他一生勤学，在这首诗中传达了“学以致用”的深刻道理，对后世学子影响极大。",
                content: [
                    { text: "古人学问无遗力，", pinyin: "gǔ rén xué wèn wú yí lì", notes: "【无遗力】不遗余力，用尽全力。" },
                    { text: "少壮工夫老始成。", pinyin: "shào zhuàng gōng fu lǎo shǐ chéng", notes: "【少壮】年轻时代。" },
                    { text: "纸上得来终觉浅，", pinyin: "zhǐ shàng dé lái zhōng jué qiǎn", notes: "【纸上得来】指从书本上获得的知识。" },
                    { text: "绝知此事要躬行。", pinyin: "jué zhī cǐ shì yào gōng xíng", notes: "【绝知】彻底了解。【躬行】亲身体验，实践。" }
                ],
                translation: "古人做学问是不遗余力的，少年的努力奋斗直到老了才见成效。从书本上得到的知识终究是浅薄的，要透彻理解其中的道理，必须亲身去实践。",
                effect: "snow",
                visualElements: ["冬夜读书", "绝知躬行"]
            },
            {
                title: "长相思",
                author: "白居易",
                dynasty: "唐",
                authorBio: "白居易写诗追求通俗易懂。这首词以一个女子的口吻，写出了对远方情人的深厚思念。层层递进，情感真挚动人。",
                content: [
                    { text: "汴水流，泗水流，", pinyin: "biàn shuǐ liú, sì shuǐ liú", notes: "汴水、泗水：皆为水名。" },
                    { text: "流到瓜洲古渡头。", pinyin: "liú dào guā zhōu gǔ dù tóu", notes: "【瓜洲】在今江苏扬州南部，是当时重要的渡口。" },
                    { text: "吴山点点愁。", pinyin: "wú shān diǎn diǎn chóu", notes: "【吴山】指长江南岸的山峦。" },
                    { text: "思悠悠，恨悠悠，", pinyin: "sī yōu yōu, hèn yōu yōu", notes: "【悠悠】形容思绪绵长。恨：遗憾，愁苦。" },
                    { text: "恨到归时方始休。", pinyin: "hèn dào guī shí fāng shǐ xiū", notes: "【休】停止。" },
                    { text: "月明人倚楼。", pinyin: "yuè míng rén yǐ lóu", notes: "【倚楼】倚靠着楼台，指思念盼望的人。" }
                ],
                translation: "汴水流淌，泗水流淌，流向那瓜洲古渡口。远处的吴山点点，仿佛都带着愁绪。思念绵长，离别的愁苦也长，直到你归来那天才会停止。明月下，我独自倚在高楼。",
                effect: "mist",
                visualElements: ["月明倚楼", "汴水长流"]
            },
            {
                title: "寄扬州韩绰判官",
                author: "杜牧",
                dynasty: "唐",
                authorBio: "杜牧曾在扬州为官，离开后十分怀念那里的生活和朋友。他这首诗既是问候友人韩绰，也流露出对扬州风光的深刻眷恋。",
                content: [
                    { text: "青山隐隐水迢迢，", pinyin: "qīng shān yǐn yǐn shuǐ tiáo tiáo", notes: "【迢迢】形容路途遥远。" },
                    { text: "秋尽江南草未凋。", pinyin: "qiū jìn jiāng nán cǎo wèi diāo", notes: "【凋】枯萎。" },
                    { text: "二十四桥明月夜，", pinyin: "èr shí sì qiáo míng yuè yè", notes: "二十四桥：扬州著名的风景点。" },
                    { text: "玉人何处教吹箫？", pinyin: "yù rén hé chù jiāo chuī xiāo", notes: "【玉人】指韩绰，也形容风度翩翩的人。" }
                ],
                translation: "青山模糊水路遥远，深秋的江南草木尚未枯萎。二十四桥在明月的辉映下寂静如画，老友你此时又在何处教人吹奏玉箫呢？",
                effect: "mist",
                visualElements: ["二十四桥", "青山迢迢"]
            },
            {
                title: "乡村四月",
                author: "翁卷",
                dynasty: "宋",
                authorBio: "翁卷是“永嘉四灵”之一，一生隐居不仕。他擅长描写清新的田园风光，这首诗真实反映了宋代江南农村繁忙而和谐的景象。",
                content: [
                    { text: "绿遍山原白满川，", pinyin: "lǜ biàn shān yuán bái mǎn chuān", notes: "【白满川】形容稻田里的水光。川：平川。" },
                    { text: "子规声里雨如烟。", pinyin: "zǐ guī shēng lǐ yǔ rú yān", notes: "【子规】杜鹃鸟。雨如烟：形容雨极其细密。" },
                    { text: "乡村四月闲人少，", pinyin: "xiāng cūn sì yuè xián rén shǎo", notes: "反映农事的繁忙。" },
                    { text: "才了蚕桑又插田。", pinyin: "cái liǎo cán sāng yòu chā tián", notes: "【了】结束。" }
                ],
                translation: "山原一片翠绿，稻田水光映照平川。杜鹃声中细雨如烟。四月的乡村没有人闲着，刚忙完采桑养蚕的事，又要去田里插秧。",
                effect: "rain",
                visualElements: ["子规雨烟", "白满川"]
            },
            {
                title: "西江月·题溧阳三塔寺",
                author: "张孝祥",
                dynasty: "宋",
                authorBio: "张孝祥是宋代豪放派词人的杰出代表。虽然他才华横溢但一生坎坷，这首词体现了他归隐后的淡泊和处变不惊的从容心态。",
                content: [
                    { text: "问讯湖边春色，", pinyin: "wèn xùn hú biān chūn sè", notes: "【问讯】询问。" },
                    { text: "重来又是三年。", pinyin: "zhòng lái yòu shì sān nián", notes: "感叹时光荏苒。" },
                    { text: "东风吹我过湖船，", pinyin: "dōng fēng chuī wǒ guò hú chuán", notes: "描写顺风而行的惬意。" },
                    { text: "杨柳丝丝拂面。", pinyin: "yáng liǔ sī sī fú miàn", notes: "【拂面】轻轻擦过脸颊。" },
                    { text: "世路如今已惯，", pinyin: "shì lù rú jīn yǐ guàn", notes: "【世路】世间的处境、人情冷暖。" },
                    { text: "此心到处悠然。", pinyin: "cǐ xīn dào chù yōu rán", notes: "【悠然】闲适自在的样子。" },
                    { text: "寒光亭下水如天，", pinyin: "hán guāng tíng xià shuǐ rú tiān", notes: "形容水天一色。" },
                    { text: "飞起沙鸥一片。", pinyin: "fēi qǐ shā ōu yī piàn", notes: "增添画面的灵动感。" }
                ],
                translation: "打听湖边的春色，三年来我又来到这里。春风吹送我的小船过湖，杨柳轻拂脸庞。世间的坎坷如今早已习惯，心情处处悠然。寒光亭下水映着天，惊起了一片沙鸥。",
                effect: "river",
                visualElements: ["水如天", "悠然此心"]
            },
            {
                title: "虞美人·听雨",
                author: "蒋捷",
                dynasty: "宋",
                authorBio: "蒋捷生于南宋末年。他的一生经历了国家覆亡的剧痛。这首词是他对自己一生不同阶段“听雨”心境的回顾，尽显亡国之思与迟暮之感。",
                content: [
                    { text: "少年听雨歌楼上，", pinyin: "shào nián tīng yǔ gē lóu shàng", notes: "描写少年的豪奢浪漫生活。" },
                    { text: "红烛昏罗帐。", pinyin: "hóng zhú hūn luó zhàng", notes: "【罗帐】绸布做的帐子。" },
                    { text: "壮年听雨客舟中，", pinyin: "zhuàng nián tīng yǔ kè zhōu zhōng", notes: "【客舟】漂流在外的客船。" },
                    { text: "江阔云低、断雁叫西风。", pinyin: "jiāng kuò yún dī, duàn yàn jiào xī fēng", notes: "【断雁】失群的孤雁。" },
                    { text: "而今听雨僧庐下，", pinyin: "ér jīn tīng yǔ sēng lú xià", notes: "【僧庐】僧人的屋子，指寺庙。" },
                    { text: "鬓已星星也。", pinyin: "bìn yǐ xīng xīng yě", notes: "【星星】形容鬓发斑白如星点。" },
                    { text: "悲欢离合总无情，", pinyin: "bēi huān lí hé zǒng wú qíng", notes: "对人生的感悟。" },
                    { text: "一任阶前、点滴到天明。", pinyin: "yī rèn jiē qián, diǎn dī dào tiān míng", notes: "【一任】听凭。" }
                ],
                translation: "少年时在歌楼听雨，红烛映照罗帐；壮年时在客船中听雨，江阔云低处有失群的孤雁。如今在寺庙下听雨，两鬓已白。悲欢离合终究无情，就任凭台阶前的雨滴声，一直滴到天亮吧。",
                effect: "rain",
                visualElements: ["僧庐听雨", "断雁西风"]
            }
        ];

        const App = () => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showTranslation, setShowTranslation] = useState(false);
            const [activeNote, setActiveNote] = useState(null);
            const [completed, setCompleted] = useState({});

            const currentPoem = POEMS_DATA[currentIndex];

            useEffect(() => { 
                if (window.lucide) window.lucide.createIcons();
            }, [currentIndex]);

            const RenderEffect = ({ type }) => (
                <div className="absolute inset-0 pointer-events-none overflow-hidden z-20">
                    {Array.from({ length: 15 }).map((_, i) => (
                        <div key={i} className="element" style={{
                            left: `${Math.random() * 100}%`,
                            top: `-${Math.random() * 20}%`,
                            animationDelay: `${Math.random() * 5}s`,
                            animationDuration: `${8 + Math.random() * 5}s`,
                            opacity: 0.3
                        }}>
                            {type === 'leaves' && <div className="w-5 h-2 bg-emerald-600 rounded-full rotate-45" />}
                            {type === 'snow' && <div className="w-2 h-2 bg-white rounded-full blur-[1px]" />}
                            {type === 'sand' && <div className="w-4 h-1 bg-amber-600/30 rounded-full" />}
                            {type === 'spark' && <div className="w-1 h-6 bg-yellow-400 animate-pulse" />}
                            {type === 'rain' && <div className="w-[1px] h-6 bg-sky-200 opacity-40" />}
                            {type === 'mist' && <div className="w-20 h-10 bg-white/5 blur-xl rounded-full" />}
                            {type === 'river' && <div className="w-10 h-[1px] bg-sky-400/20" />}
                            {type === 'confetti' && <div className="w-3 h-3 bg-red-500/40 rounded-sm rotate-45" />}
                        </div>
                    ))}
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    <div className="w-full max-w-6xl mb-6 flex justify-between items-center px-4">
                        <div className="flex items-center gap-4">
                            <div className="bg-indigo-600 p-2 rounded-xl">
                                <i data-lucide="book-open" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h2 className="text-sm font-black tracking-widest text-white italic uppercase">古诗词那些事儿 · 严谨版</h2>
                                <div className="flex gap-1 mt-1">
                                    {POEMS_DATA.map((_, i) => (
                                        <div key={i} className={`h-1 w-2 rounded-full ${completed[i] ? 'bg-emerald-400' : i === currentIndex ? 'bg-indigo-500 w-4' : 'bg-white/10'}`} />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="w-full max-w-6xl lg:h-[80vh] bg-slate-900 rounded-[3rem] border border-white/10 shadow-2xl overflow-hidden flex flex-col lg:flex-row relative">
                        <div className="w-full lg:w-1/2 h-[300px] lg:h-full relative overflow-hidden bg-slate-950 border-r border-white/5">
                            <div className="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-black/30 z-10" />
                            <RenderEffect type={currentPoem.effect} />
                            <div className="absolute inset-0 flex flex-col justify-center items-center text-white z-40 p-8 text-center">
                                <h1 className="text-5xl md:text-7xl font-serif font-black tracking-tighter drop-shadow-2xl">{currentPoem.title}</h1>
                                <div className="mt-4 px-6 py-1 bg-white/10 backdrop-blur-md rounded-full border border-white/10 text-xs font-bold tracking-[0.2em]">{currentPoem.dynasty} · {currentPoem.author}</div>
                                <div className="mt-8 flex gap-2 flex-wrap justify-center">
                                    {currentPoem.visualElements.map((e, idx) => (
                                        <span key={idx} className="text-[10px] bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 px-3 py-1 rounded-full">{e}</span>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <div className="w-full lg:w-1/2 p-8 lg:p-14 flex flex-col bg-slate-950 overflow-y-auto custom-scroll">
                            <div className="flex-grow flex flex-col justify-center space-y-8">
                                <div className="relative p-6 bg-indigo-500/5 rounded-3xl border border-indigo-500/20 group">
                                    <div className="flex items-center gap-2 mb-3 text-indigo-400">
                                        <i data-lucide="info" class="w-4 h-4"></i>
                                        <span className="text-[10px] font-black tracking-widest uppercase">诗人背景</span>
                                    </div>
                                    <p className="text-slate-400 text-sm leading-relaxed italic relative z-10">{currentPoem.authorBio}</p>
                                </div>

                                <div className="space-y-8 py-4">
                                    {currentPoem.content.map((line, idx) => (
                                        <div key={idx} className="group relative">
                                            <p className="pinyin font-mono">{line.pinyin}</p>
                                            <p className={`text-4xl md:text-5xl font-serif cursor-help transition-all ${activeNote === line.notes ? 'text-indigo-400' : 'text-slate-200 hover:text-indigo-300'}`} 
                                               onClick={() => setActiveNote(activeNote === line.notes ? null : line.notes)}>
                                                {line.text}
                                            </p>
                                            {activeNote === line.notes && (
                                                <div className="mt-3 p-4 bg-slate-900 rounded-2xl border-l-4 border-indigo-500 text-indigo-100 text-sm animate-in slide-in-from-left-4">
                                                    {line.notes}
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                
                                <div className="flex gap-4 pt-6">
                                    <button onClick={() => setShowTranslation(!showTranslation)} className={`flex-1 py-5 rounded-2xl border transition-all flex justify-center items-center gap-3 font-bold ${showTranslation ? 'bg-indigo-600 border-indigo-400 shadow-lg shadow-indigo-500/30' : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}>
                                        <i data-lucide="book" class="w-5 h-5"></i>
                                        <span>白话译文</span>
                                    </button>
                                    <button onClick={() => setCompleted(p => ({...p, [currentIndex]: !p[currentIndex]}))} className={`w-20 py-5 rounded-2xl border transition-all flex justify-center items-center ${completed[currentIndex] ? 'bg-emerald-600 border-emerald-400 text-white' : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}>
                                        <i data-lucide={completed[currentIndex] ? "check-circle-2" : "circle"} class="w-6 h-6"></i>
                                    </button>
                                </div>
                                {showTranslation && <div className="p-6 bg-slate-900 rounded-3xl border border-white/5 text-slate-300 text-base leading-relaxed animate-in fade-in slide-in-from-bottom-2">{currentPoem.translation}</div>}
                            </div>
                        </div>
                    </div>

                    <div className="mt-8 w-full max-w-6xl px-4 flex items-center gap-3 overflow-x-auto no-scrollbar py-4">
                        {POEMS_DATA.map((p, i) => (
                            <button key={i} onClick={() => {setCurrentIndex(i); setShowTranslation(false); setActiveNote(null);}} className={`shrink-0 w-14 h-14 rounded-2xl border text-sm font-black transition-all flex flex-col items-center justify-center gap-1 ${currentIndex === i ? 'bg-indigo-600 text-white scale-110 shadow-xl shadow-indigo-500/40 border-indigo-400' : 'bg-white/5 border-white/10 text-white/20 hover:text-white/50'}`}>
                                <span className="text-[10px] opacity-50">#{i + 1}</span>
                                <span>{p.author[0]}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
