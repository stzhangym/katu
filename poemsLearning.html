<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>古诗词互动手册 - 趣解唐宋版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #020617; overflow-x: hidden; }
        .font-serif { font-family: 'Noto Serif SC', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        
        .img-fade { animation: fadeIn 2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 0.5; } }
        
        .poem-image-container::after {
            content: "";
            position: absolute;
            inset: 0;
            box-shadow: inset 0 0 100px 50px rgba(2, 6, 23, 0.8);
            pointer-events: none;
        }
    </style>
</head>
<body class="text-slate-100">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const POEMS_DATA = [
            {
                title: "四时田园杂兴", author: "范成大", dynasty: "宋",
                authorBio: "范老师退休后回苏州老家开启了“顶级养老博主”模式。他不跳广场舞也不钓鱼，专门观察农民伯伯怎么干活，顺便把田园风光拍成了短视频（诗歌版）。",
                content: [
                    { text: "昼出耘田夜绩麻，", pinyin: "zhòu chū yún tián yè jì má", notes: "【耘田】除草。【绩麻】搓麻线。" },
                    { text: "村庄儿女各当家。", pinyin: "cūn zhuāng ér nǚ gè dāng jiā", notes: "各自承担劳动。" },
                    { text: "童孙未解供耕织，", pinyin: "tóng sūn wèi jě gòng gēng zhī", notes: "小孩不懂耕种。" },
                    { text: "也傍桑阴学种瓜。", pinyin: "yě bàng sāng yīn xué zhòng guā", notes: "学大人种瓜。" }
                ],
                translation: "白天除草晚上搓麻，村里男女各忙各。小孩不懂耕织，却在桑阴下学种瓜。",
                imageUrl: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "稚子弄冰", author: "杨万里", dynasty: "宋",
                authorBio: "杨万里是“诚斋体”的创始人，简单说就是爱写生活中的“沙雕瞬间”。这首诗记录了他家娃在清晨玩冰块，结果砸碎了的一场‘翻车现场’。",
                content: [
                    { text: "稚子金盆脱晓冰，", pinyin: "zhì zǐ jīn pén tuō xiǎo bīng", notes: "清晨取冰。" },
                    { text: "彩丝穿取当银钲。", pinyin: "cǎi sī chuān qǔ dāng yín zhēng", notes: "钲：金属乐器。" },
                    { text: "敲成玉磬穿林响，", pinyin: "qiāo chéng yù qìng chuān lín xiǎng", notes: "声音清脆。" },
                    { text: "忽作玻璃碎地声。", pinyin: "hū zuò bō lí suì dì shēng", notes: "冰碎的声音。" }
                ],
                translation: "清晨小孩取冰穿线当乐器敲，声音清脆，忽然冰碎落地如玻璃声。",
                imageUrl: "https://images.unsplash.com/photo-1517299321609-52687d1bc55a?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "村晚", author: "雷震", dynasty: "宋",
                authorBio: "雷震这名字听着挺硬核，其实心肠最软。他画了一幅“牧童放羊”的插画，没有一句说苦，全是孩子翘着二郎腿吹短笛的潇洒状态。",
                content: [
                    { text: "草满池塘水满陂，", pinyin: "cǎo mǎn chí táng shuǐ mǎn bēi", notes: "陂：池岸。" },
                    { text: "山衔落日浸寒漪。", pinyin: "shān xián luò rì jìn hán yī", notes: "夕阳倒影。" },
                    { text: "牧童归去横牛背，", pinyin: "mù tóng guī qù héng niú bèi", notes: "横坐牛背。" },
                    { text: "短笛无腔信口吹。", pinyin: "duǎn dí wú qiāng xìn kǒu chuī", notes: "信口：随口。" }
                ],
                translation: "池塘草绿水满。夕阳衔山，牧童横坐牛背随口吹笛回家。",
                imageUrl: "https://images.unsplash.com/photo-1506399558188-acca6f8cbf41?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "游子吟", author: "孟郊", dynasty: "唐",
                authorBio: "孟郊是著名的“苦逼派”诗人，考试考了一辈子，50岁才转正。但这首诗是他最温柔的一刻，因为他知道，世界上唯一的避风港是老妈熬夜缝的那件大衣。",
                content: [
                    { text: "慈母手中线，", pinyin: "cí mǔ shǒu zhōng xiàn", notes: "母亲缝衣。" },
                    { text: "游子身上衣。", pinyin: "yóu zǐ shēn shàng yī", notes: "离家之子。" },
                    { text: "临行密密缝，", pinyin: "lín xíng mì mì féng", notes: "怕儿子迟归。" },
                    { text: "意恐迟迟归。", pinyin: "yì kǒng chí chí guī", notes: "担心。" }
                ],
                translation: "慈母缝衣，临行前缝得细密，报答不尽母亲如春晖般的爱。",
                imageUrl: "https://images.unsplash.com/photo-1533613220915-609f661a6fe1?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "鸟鸣涧", author: "王维", dynasty: "唐",
                authorBio: "王维，大唐顶级流量兼首席设计师。他在山里买了个大别墅（辋川别业），每天就在山里发呆、画画、听鸟叫，妥妥的“佛系大佬”生活范本。",
                content: [
                    { text: "人闲桂花落，", pinyin: "rén xián guì huā luò", notes: "心静察花落。" },
                    { text: "夜静春山空。", pinyin: "yè jìng chūn shān kōng", notes: "空：宁静。" },
                    { text: "月出惊山鸟，", pinyin: "yuè chū jīng shān niǎo", notes: "月光惊鸟。" },
                    { text: "时鸣春涧中。", pinyin: "shí míng chūn jiàn zhōng", notes: "不时啼鸣。" }
                ],
                translation: "人静察觉花落，山夜空灵。月出惊起山鸟，在溪涧间啼鸣。",
                imageUrl: "https://images.unsplash.com/photo-1504198453319-5ce911bafcde?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "从军行", author: "王昌龄", dynasty: "唐",
                authorBio: "老王是边塞诗里的带头大哥。别看大唐繁华，边境可是玩命的地方。老王用这首诗告诉所有人：没点热血，在大唐是混不下去的！",
                content: [
                    { text: "青海长云暗雪山，", pinyin: "qīng hǎi cháng yún àn xuě shān", notes: "云遮雪山。" },
                    { text: "孤城遥望玉门关。", pinyin: "gū chéng yáo wàng yù mén guān", notes: "遥望要塞。" },
                    { text: "黄沙百战穿金甲，", pinyin: "huáng shā bǎi zhàn chuān jīn jiǎ", notes: "金甲磨破。" },
                    { text: "不破楼兰终不还。", pinyin: "bù pò lóu lán zhōng bù hái", notes: "誓不罢休。" }
                ],
                translation: "长云遮蔽雪山，遥望玉门关。百战穿透金甲，不胜敌军誓不还。",
                imageUrl: "https://images.unsplash.com/photo-1469066630291-171f23b6d1e5?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "秋夜将晓出篱门迎凉有感", author: "陆游", dynasty: "宋",
                authorBio: "陆游是南宋最大的愤青（褒义）。他一辈子都想把北方失地收回来，临老了还在家里熬夜写诗：“喂，南边那帮打仗的哥们，我们还没输！”",
                content: [
                    { text: "三万里河东入海，", pinyin: "sān wàn lǐ hé dōng rù hǎi", notes: "指黄河。" },
                    { text: "五千仞岳上摩天。", pinyin: "wǔ qiān rèn yuè shàng mó tiān", notes: "指华山。" },
                    { text: "遗民泪尽胡尘里，", pinyin: "yí mín lèi jìn hú chén lǐ", notes: "百姓哭泣。" },
                    { text: "南望王师又一年。", pinyin: "nán wàng wáng shī yòu yī nián", notes: "盼望回归。" }
                ],
                translation: "黄河入海，华山摩天。遗民在敌后哭干眼泪，年年盼望南宋军队。",
                imageUrl: "https://images.unsplash.com/photo-1518481612222-68bbe828ec1e?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "闻官军收河南河北", author: "杜甫", dynasty: "唐",
                authorBio: "老杜这辈子苦哈哈，这首诗是他唯一的“高光时刻”。听说叛军投降了，他激动得手舞足蹈，连行李都不要了，直接开启“疯狂购票回家”模式。",
                content: [
                    { text: "剑外忽传收蓟北，", pinyin: "jiàn wài hū chuán shōu jì běi", notes: "收复失地。" },
                    { text: "初闻涕泪满衣裳。", pinyin: "chū wén tì lèi mǎn yī shang", notes: "喜极而泣。" },
                    { text: "白日放歌须纵酒，", pinyin: "bái rì fàng gē xū zòng jiǔ", notes: "开怀畅饮。" },
                    { text: "青春作伴好还乡。", pinyin: "qīng chūn zuò bàn hǎo huán xiāng", notes: "伴着春色还乡。" }
                ],
                translation: "听闻收复，喜极而泣。春天放歌纵酒，即刻动身返回家乡。",
                imageUrl: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "凉州词", author: "王之涣", dynasty: "唐",
                authorBio: "当年大唐有三个大V（王之涣、高适、王昌龄）在酒楼看妹子唱歌比赛。谁的诗被唱最多谁就牛掰。最终，王之涣靠这首“羌笛何须怨杨柳”绝杀全场。",
                content: [
                    { text: "黄河远上白云间，", pinyin: "huáng hé yuǎn shàng bái yún jān", notes: "黄河源头。" },
                    { text: "一片孤城万仞山。", pinyin: "yī piàn gū chéng wàn rèn shān", notes: "孤城屹立。" },
                    { text: "羌笛何须怨杨柳，", pinyin: "qiāng dí hé xū yuàn yáng liǔ", notes: "怨：埋怨。" },
                    { text: "春风不度玉门关。", pinyin: "chūn fēng bù dù yù mén guān", notes: "春风不来。" }
                ],
                translation: "黄河远接白云，孤城屹立大山。羌笛何必怨柳不绿，春风本就不吹玉门关。",
                imageUrl: "https://images.unsplash.com/photo-1505832018823-50331d70d237?auto=format&fit=crop&q=80&w=1200"
            },
            {
                title: "黄鹤楼送孟浩然之广陵", author: "李白", dynasty: "唐",
                authorBio: "李白是孟浩然的头号迷弟。偶像要去扬州自驾游，李白在岸边依依不舍，眼神一直盯着人家的船看，直到看不见为止，活像个送机的小粉丝。",
                content: [
                    { text: "故人西辞黄鹤楼，", pinyin: "gù rén xī cí huáng hè lóu", notes: "辞别楼台。" },
                    { text: "烟花三月下扬州。", pinyin: "yān huā sān yuè xià yáng zhōu", notes: "三月春景。" },
                    { text: "孤帆远影碧空尽，", pinyin: "gū fān yuǎn yǐng bì kōng jìn", notes: "帆影消失。" },
                    { text: "唯见长江天际流。", pinyin: "wéi jàn cháng jiāng tiān jì liú", notes: "唯见大江。" }
                ],
                translation: "老友辞别黄鹤楼去扬州。孤帆远去消失在碧空，唯见长江水向天流。",
                imageUrl: "https://images.unsplash.com/photo-1510672981848-a1c4f1cb5ccf?auto=format&fit=crop&q=80&w=1200"
            }
        ];

        const App = () => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showTranslation, setShowTranslation] = useState(false);
            const [activeNote, setActiveNote] = useState(null);
            const [completed, setCompleted] = useState({});

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [currentIndex]);

            const currentPoem = POEMS_DATA[currentIndex];

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    <div className="w-full max-w-6xl mb-6 flex justify-between items-center px-4">
                        <div className="flex items-center gap-4">
                            <div className="bg-indigo-600 p-2 rounded-xl shadow-lg shadow-indigo-500/20">
                                <i data-lucide="scroll-text" className="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h2 className="text-sm font-black tracking-widest text-white italic uppercase">大唐那些事儿 · 趣解手册</h2>
                                <div className="flex gap-1 mt-1">
                                    {POEMS_DATA.map((_, i) => (
                                        <div key={i} className={`h-1 transition-all rounded-full ${completed[i] ? 'bg-emerald-400' : i === currentIndex ? 'bg-indigo-500 w-4' : 'bg-white/10 w-2'}`} />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="w-full max-w-6xl lg:h-[80vh] bg-slate-900 rounded-[3rem] border border-white/10 shadow-2xl overflow-hidden flex flex-col lg:flex-row relative">
                        <div className="w-full lg:w-1/2 h-[350px] lg:h-full relative overflow-hidden bg-slate-950 poem-image-container">
                            <img 
                                key={currentPoem.imageUrl}
                                src={currentPoem.imageUrl} 
                                className="absolute inset-0 w-full h-full object-cover opacity-50 scale-100 img-fade"
                                alt="Poem View"
                            />
                            
                            <div className="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-black/20 z-10" />
                            
                            <div className="absolute inset-0 flex flex-col justify-center items-center text-white z-40 p-8 text-center">
                                <h1 className="text-5xl md:text-7xl font-serif font-black tracking-tighter drop-shadow-2xl">{currentPoem.title}</h1>
                                <div className="mt-4 px-6 py-1 bg-white/10 backdrop-blur-md rounded-full border border-white/10 text-xs font-bold tracking-[0.2em]">{currentPoem.dynasty} · {currentPoem.author}</div>
                            </div>
                        </div>

                        <div className="w-full lg:w-1/2 p-8 lg:p-14 flex flex-col bg-slate-950 overflow-y-auto custom-scroll">
                            <div className="flex-grow flex flex-col justify-center space-y-8">
                                <div className="relative p-6 bg-amber-500/5 rounded-3xl border border-amber-500/20">
                                    <div className="flex items-center gap-2 mb-3 text-amber-400">
                                        <i data-lucide="zap" className="w-4 h-4"></i>
                                        <span className="text-[10px] font-black tracking-widest uppercase">诗人那些事儿</span>
                                    </div>
                                    <p className="text-slate-400 text-sm leading-relaxed italic">{currentPoem.authorBio}</p>
                                </div>

                                <div className="space-y-8 py-4">
                                    {currentPoem.content.map((line, idx) => (
                                        <div key={idx} className="group relative">
                                            <p className="pinyin font-mono opacity-40 text-xs mb-1">{line.pinyin}</p>
                                            <p className={`text-3xl md:text-5xl font-serif cursor-help transition-all ${activeNote === line.notes ? 'text-indigo-400' : 'text-slate-200 hover:text-indigo-300'}`} 
                                               onClick={() => setActiveNote(activeNote === line.notes ? null : line.notes)}>
                                                {line.text}
                                            </p>
                                            {activeNote === line.notes && (
                                                <div className="mt-3 p-4 bg-slate-900 rounded-2xl border-l-4 border-indigo-500 text-indigo-100 text-sm animate-in slide-in-from-left-4">
                                                    {line.notes}
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                
                                <div className="flex gap-4 pt-6">
                                    <button onClick={() => setShowTranslation(!showTranslation)} className={`flex-1 py-5 rounded-2xl border transition-all flex justify-center items-center gap-3 font-bold ${showTranslation ? 'bg-indigo-600 border-indigo-400 shadow-lg shadow-indigo-500/30' : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}>
                                        <i data-lucide="languages" className="w-5 h-5"></i>
                                        <span>大白话解释</span>
                                    </button>
                                    <button onClick={() => setCompleted(p => ({...p, [currentIndex]: !p[currentIndex]}))} className={`w-20 py-5 rounded-2xl border transition-all flex justify-center items-center ${completed[currentIndex] ? 'bg-emerald-600 border-emerald-400 text-white' : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}>
                                        <i data-lucide={completed[currentIndex] ? "party-popper" : "circle"} className="w-6 h-6"></i>
                                    </button>
                                </div>
                                {showTranslation && <div className="p-6 bg-slate-900 rounded-3xl border border-white/5 text-slate-300 text-base leading-relaxed animate-in fade-in slide-in-from-bottom-2">
                                    <span className="text-indigo-400 font-bold block mb-2">翻译一下：</span>
                                    {currentPoem.translation}
                                </div>}
                            </div>
                        </div>
                    </div>

                    <div className="mt-8 w-full max-w-6xl px-4 flex items-center gap-3 overflow-x-auto no-scrollbar py-4">
                        {POEMS_DATA.map((p, i) => (
                            <button key={i} onClick={() => {setCurrentIndex(i); setShowTranslation(false); setActiveNote(null);}} className={`shrink-0 w-14 h-14 rounded-2xl border text-[10px] font-black transition-all flex flex-col items-center justify-center gap-1 ${currentIndex === i ? 'bg-indigo-600 text-white scale-110 shadow-xl shadow-indigo-500/40 border-indigo-400' : 'bg-white/5 border-white/10 text-white/20 hover:text-white/50'}`}>
                                <span className="opacity-50">#{i + 1}</span>
                                <span className="text-xs">{p.author[0]}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
